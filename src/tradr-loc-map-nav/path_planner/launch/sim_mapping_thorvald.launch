<?xml version="1.0" encoding="utf-8"?>

<launch>

	  <arg name="robot_name" default="thorvald" />
	  <arg name="simulator" default="gazebo" />
		<arg name="tf_prefix" default="" />

	  <arg name="respawn_value" default="false" /> <!-- boolean: true, false -->

      <arg name="use_laser_assembler" default="false" /> <!-- boolean: true, false -->

      <arg name="octomap_cloud_in" default="/$(arg simulator)/$(arg robot_name)/scan_point_cloud_color" unless="$(arg use_laser_assembler)"/>
      <arg name="octomap_cloud_in" default="/$(arg simulator)/$(arg robot_name)/dynamic_point_cloud" if="$(arg use_laser_assembler)"/>


      <!-- octomap server -->
	  <node name="mapping_$(arg robot_name)" pkg="ms_octomap_server" type="octomap_server_node" respawn="$(arg respawn_value)" output="screen">
		 <param name = "base_frame_id" value = "$(arg tf_prefix)/base_link"/>
		 <param name = "resolution" value = "0.075"/>
		 <param name = "sensor_model/hit" value = "0.75"/>
		 <param name = "sensor_model/miss" value = "0.45" />
		 <param name = "sensor_model/min" value = "0.12" />
		 <param name = "sensor_model/max" value = "0.97" />
         <!-- Input -->
		 <!-- <remap from = "cloud_in" to = "$(arg octomap_cloud_in)"/> -->
		 <!-- <remap from="cloud_in" to="/velodyne_points" /> -->
		 <!-- <remap from="cloud_in" to="/thorvald_ii/kinect2/sd/points" /> -->
		 <remap from = "cloud_in1" to = "/thorvald_ii/kinect2/sd/points"/>
		 <remap from = "cloud_in2" to = "/velodyne_points"/>
         <!-- Output -->
		 <remap from = "octomap_point_cloud_centers" to = "/$(arg simulator)/$(arg robot_name)/local_map"/>
	  </node>

      <!-- normals computation -->
      <include file="$(find path_planner)/launch/sim_compute_normals_thorvald.launch" >
          <arg name="respawn_value" value="$(arg respawn_value)" />
          <arg name="robot_name" value="$(arg robot_name)" />
					<arg name="simulator" value="$(arg simulator)" />
					<arg name="tf_prefix" value="$(arg tf_prefix"/>
      </include>


</launch>
